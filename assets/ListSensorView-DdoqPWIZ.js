var q=Object.defineProperty;var W=(s,o,t)=>o in s?q(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t;var E=(s,o,t)=>W(s,typeof o!="symbol"?o+"":o,t);import{h as A,i as D,U as M,d as U,r as b,S as K,c as x,o as y,a as e,A as S,B as w,D as C,m as F,F as $,T as P,b as j,t as T,N,V as O,q as Q,Q as Y,w as G,e as J,W as X,z as Z}from"./index-aXTdyAxE.js";const z="sensorPort",I="sensorIp",ee="sensorName",te="sensorCronJobDays",oe="sensorCronJobTimeHour",se="sensorCronJobTimeMinute",R="update-name",H="update-cronjob-days",B="update-cronjob-time",ne=D.apiBaseUrl+"/sensor/all",re=D.apiBaseUrl+"/sensor/shutdown",ae=D.apiBaseUrl+"/sensor/update";function ie(s){if(!/^[0-6]-[0-6]$/.test(s))return!1;const t=s.split("-");return t[0]<=t[1]}function ue(s,o){return s>=0&&s<=23&&o>=0&&o<=59}async function le(s){const o={[M]:s};return await A.get(ne,{headers:o})}async function de(s,o,t){const a={[M]:s},i={[I]:o,[z]:t};return await A.delete(re,{headers:a,params:i})}async function V(s,o,t,a){const i={[M]:s},l={[I]:o,[z]:t};return Object.keys(a).forEach(c=>{l[c]=a[c]}),await A.put(ae,l,{headers:i})}async function ce(s,o,t,a){return await V(s,o,String(t),{action:R,[ee]:a})}async function pe(s,o,t,a){return await V(s,o,String(t),{action:H,[te]:a})}async function me(s,o,t,a,i){return await V(s,o,String(t),{action:B,[oe]:a,[se]:i})}const ge={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},fe={class:"relative bg-white rounded-lg shadow-lg p-6 w-full max-w-md border-4 border-dashed border-secondary"},be={class:"mb-6"},ye={class:"text-lg font-small text-gray-900",for:"input-name"},ve={class:"mb-6"},he={class:"text-lg font-small text-gray-900",for:"input-working-days"},xe={class:"mb-6"},Se={class:"flex space-x-4"},we={class:"text-lg font-small text-gray-900",for:"input-working-hours"},_e={class:"text-lg font-small text-gray-900",for:"input-working-minutes"},ke=U({__name:"SensorSettingsModal",props:{name:{type:String,required:!0},workingHours:{type:Object,default:()=>({hours:0,minutes:0})}},emits:["close","save"],setup(s,{emit:o}){const t=s,a=o,i=b(t.name),l=K({...t.workingHours}),c=b(""),m={action:"",name:"",days:"",hour:"",minute:""},v=g=>{m.action=g},_=g=>{v(R),m.name=g},d=g=>{v(H),m.days=g},n=(g,r)=>{v(B),m.hour=String(g),m.minute=String(r)},u=()=>{a("close")},p=()=>{c.value.trim()&&ie(c.value)?(d(c.value),a("save",m),u()):alert("The input dayus should be formated like so: [0-6] and the values must be included in the range [0, 6]")},f=async()=>{i.value.trim()&&(_(i.value),a("save",m),u())},k=async()=>{ue(l.hours,l.minutes)&&(n(l.hours,l.minutes),a("save",m),u())};return(g,r)=>(y(),x("div",ge,[e("div",fe,[r[12]||(r[12]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Sensor Settings",-1)),e("button",{class:"absolute top-4 right-4 text-gray-500 hover:text-red-900",onClick:r[0]||(r[0]=h=>g.$emit("close"))},"X"),e("div",be,[r[6]||(r[6]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Change Sensor Name",-1)),e("label",ye,[r[5]||(r[5]=S(" Name: ")),w(e("input",{id:"input-name","onUpdate:modelValue":r[1]||(r[1]=h=>i.value=h),type:"text",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"},null,512),[[C,i.value]])]),e("button",{onClick:f,class:"mt-2 bg-primary text-black font-medium px-4 py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Change Name ")]),e("div",ve,[r[8]||(r[8]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Cronjob days [format: dd-dd]",-1)),e("label",he,[r[7]||(r[7]=S(" Days: ")),w(e("input",{id:"input-working-days","onUpdate:modelValue":r[2]||(r[2]=h=>c.value=h),type:"text",placeholder:"Set new working days",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"},null,512),[[C,c.value]])]),e("button",{onClick:p,class:"mt-2 bg-primary text-black font-medium px-4 py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Change Days ")]),e("div",xe,[r[11]||(r[11]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Cronjob Time",-1)),e("div",Se,[e("label",we,[r[9]||(r[9]=S(" Hours: ")),w(e("input",{id:"input-working-hours","onUpdate:modelValue":r[3]||(r[3]=h=>l.hours=h),type:"number",class:"w-1/2 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",max:"23",min:"0",placeholder:"Hours"},null,512),[[C,l.hours,void 0,{number:!0}]])]),e("label",_e,[r[10]||(r[10]=S(" Minutes: ")),w(e("input",{id:"input-working-minutes","onUpdate:modelValue":r[4]||(r[4]=h=>l.minutes=h),type:"number",max:"59",min:"0",class:"w-1/2 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"Minutes"},null,512),[[C,l.minutes,void 0,{number:!0}]])])]),e("button",{onClick:k,class:"mt-2 bg-primary text-black px-4 font-medium py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Change Time ")])])]))}}),Ce={class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50"},Ne={class:"bg-white p-6 rounded-lg shadow-lg w-96"},Ee={class:"flex justify-end space-x-4"},Te=U({__name:"ConfirmationModal",emits:["confirm","cancel"],setup(s){return(o,t)=>(y(),x("div",Ce,[e("div",Ne,[t[2]||(t[2]=e("h2",{class:"text-lg font-bold text-gray-800 mb-4"},"Confirm Action",-1)),t[3]||(t[3]=e("p",{class:"text-gray-600 mb-4"},"Are you sure you want to proceed?",-1)),e("div",Ee,[e("button",{onClick:t[0]||(t[0]=a=>o.$emit("cancel")),name:"Confirm action",class:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400"}," Cancel "),e("button",{onClick:t[1]||(t[1]=a=>o.$emit("confirm")),name:"Cancel action",class:"px-4 py-2 bg-secondary text-white rounded hover:bg-red-700"}," Confirm ")])])]))}}),Oe={class:"bg-white shadow-md rounded-lg p-4 mb-4 w-full justify-between items-center hover:bg-gray-200"},Ue={id:"sensor-information",class:"space-y-2"},$e={class:"block text-gray-700 font-medium"},Ae={for:"sensor-information",class:"block text-gray-700 font-medium"},De={class:"block text-gray-700 font-medium"},Me=U({__name:"ListComponent",props:{ip:{type:String,default:""},name:{type:String,default:""},port:{type:String,default:""}},emits:["removeSensor","updateSensorName"],setup(s,{emit:o}){const t=F(),a=o,i=s,l=b(!1),c=b(!1),m=b({hours:0,minutes:0}),v=()=>{l.value=!l.value},_=async p=>{const f=p.action,k=t.token.value;switch(f){case R:{(await ce(k,i.ip,i.port,p.name)).status===N.Unauthorized?O.push("/login"):a("updateSensorName",{ip:i.ip,port:i.port,name:p.name});return}case H:{(await pe(k,i.ip,i.port,p.days)).status===N.Unauthorized&&O.push("/login");return}case B:{(await me(k,i.ip,i.port,p.hour,p.minute)).status===N.Unauthorized&&O.push("/login");return}}},d=()=>{c.value=!1},n=()=>{c.value=!0},u=async()=>{(await de(t.token.value,i.ip,i.port)).status===N.Ok&&a("removeSensor",{ip:i.ip,port:i.port}),d()};return(p,f)=>(y(),x($,null,[e("div",Oe,[e("div",Ue,[e("h3",$e,"IP: "+T(s.ip),1),e("h3",Ae,"Name: "+T(s.name),1),e("h3",De,"Port: "+T(s.port),1)]),e("div",{class:"flex space-x-2"},[e("button",{onClick:n,class:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500"}," Shut Down "),e("button",{onClick:v,class:"bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Settings ")]),l.value?(y(),P(ke,{key:0,name:s.name,workingHours:m.value,onClose:v,onSave:_},null,8,["name","workingHours"])):j("",!0)]),c.value?(y(),P(Te,{key:0,onCancel:d,onConfirm:u})):j("",!0)],64))}});class L{constructor(o,t,a="unknown"){E(this,"ip");E(this,"name");E(this,"port");this.ip=o,this.port=t,this.name=a}}const Re={class:"w-full max-w-3xl mx-auto"},He={id:"search-engine",class:"pb-10 sticky top-0 border-4 border-dashed border-secondary bg-white rounded p-2 mb-5 mt-2"},Be={class:"text-lg font-medium text-gray-900",for:"input-name"},Ve={id:"radio-filters",class:"bg-white rounded-md mt-2"},Pe={class:"list-none mt-2"},je=["for"],Je=["id","value"],Le={id:"sensor list",class:"sensor-list w-100"},Fe={class:"overflow-auto"},qe=U({__name:"ListSensorView",setup(s){const o=b([]),t=b([]),a=b(""),i=["ip","port","name"],l=b(i[0]),c=F();Q(async()=>{const d=c.token.value;try{(await le(d)).data.sensors.forEach(u=>{o.value.push(new L(u.ip,String(u.port),u.name||"unknown")),t.value.push(new L(u.ip,String(u.port),u.name||"unknown"))})}catch(n){n instanceof Y&&n.status===N.Unauthorized&&O.push("/login")}});const m=d=>{t.value=t.value.filter(n=>n.ip!==d.ip||n.port!==d.port)},v=d=>{t.value.filter(n=>n.ip===d.ip&&n.port===d.port).forEach(n=>n.name=d.name)},_=()=>{const d=l.value.toLowerCase(),n=a.value;if(!n)return o.value;const p={ip:f=>f.ip.includes(n),port:f=>f.port.includes(n),name:f=>f.name.includes(n)}[d]||(()=>[]);return o.value.filter(p)};return G(a,()=>{t.value=_()}),(d,n)=>(y(),x("div",Re,[e("div",He,[n[4]||(n[4]=e("h2",{class:"text-gray-900 text-center font-bold"},"Search a Sensor",-1)),e("label",Be,[n[2]||(n[2]=S(" Type a value: ")),w(e("input",{name:"input-name",id:"input-name",type:"text","onUpdate:modelValue":n[0]||(n[0]=u=>a.value=u),placeholder:"Search a sensor",class:"w-full p-2 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"},null,512),[[C,a.value]])]),e("div",Ve,[n[3]||(n[3]=e("h3",{class:"font-bold text-gray-900 text-center"},"Filters:",-1)),e("ul",Pe,[(y(),x($,null,J(i,u=>e("li",{key:u,class:"mb-2 flex items-center gap-2 cursor-pointer"},[e("label",{class:"text-lg font-medium text-gray-900 mt-4 block text-left",for:"radio-button-"+u},[S(T(u)+": ",1),w(e("input",{type:"radio",id:"radio-button-"+u,value:u,"onUpdate:modelValue":n[1]||(n[1]=p=>l.value=p),name:"search-group",class:"cursor-pointer font-medium"},null,8,Je),[[X,l.value]])],8,je)])),64))])])]),e("div",Le,[e("ul",Fe,[(y(!0),x($,null,J(t.value,u=>(y(),x("li",{key:u.ip},[Z(Me,{ip:u.ip,port:u.port,name:u.name,onRemoveSensor:m,onUpdateSensorName:v},null,8,["ip","port","name"])]))),128))])])]))}});export{qe as default};
//# sourceMappingURL=ListSensorView-DdoqPWIZ.js.map
